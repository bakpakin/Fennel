# -*- js -*-
{
    "version": "2.1",

    "jobs": {
        "build": {
            "docker": [{"image": "debian:stable"}],
            "steps": [
                "checkout",
                {"run": "apt-get update -qq"},
                {"run": "apt-get install -qq make"},
                {"run": "make ci"},
            ]
        },
        "windows": {
            "executor": "windows/default",
            "steps": [
                "checkout",
                {"run": "choco install -y lua53"},
                {"run": "choco install -y make"},
                {"run": "make test LUA=lua53"}
            ]
        }
    },

    "workflows": {
        "version": 2,
        "all": {
            "jobs": ["build"]
        }
    },

    "orbs": {
        "windows": "circleci/windows@2.2.0"
    }
}
